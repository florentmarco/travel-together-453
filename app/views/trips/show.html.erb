<div class="container">
  <h1>Trip to <%= @trip.location %>  </h1>
  <p> <%= @trip.name %> </p>
  <%= @trip.start_date %> <%= @trip.end_date %>

  <%= link_to 'Edit', edit_trip_path(@trip) %>
  <%= link_to 'Back', trips_path %>

  <hr>

  <%= link_to "Re-generate invite link", regenerate_invite_link_path(@trip), method: :patch %>
  <p> Invite link: http://localhost:3000/trips/<%= @trip.id %>?token=<%= @trip.invite_token %> </p>

  <hr>

  <h3>Messages </h3>
  <div id="messages" data-trip-id="<%= @trip.id %>">
    <% @trip.messages.each do |message| %>
      <div class="message-container" id="message-<%= message.id %>">
        <i class="author">
          <span><%= message.user.name %></span>
          <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
        </i>
        <p><%= message.content %></p>
      </div>
    <% end %>
  </div>

  <%= simple_form_for [ @trip, @message ], remote: true do |f| %>
    <%= f.input :content, label: false, placeholder: "Message ##{@trip.name}" %>
    <%= f.submit %>
  <% end %>
</div>
